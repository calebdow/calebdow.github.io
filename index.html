<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="css/style.css" type="text/css"/>
    <img src="https://www.strausscenter.org/images/footer_logo/StraussLogo.gif" id="strauss">
    <h1> CEPSA Coding Page </h1>
    <title>Read File (via User Input selection)</title>
        <ul id=list>
          <li><input type='button' onclick= 'PilotWords()' value='1'></li>
          <li><input type='button' onclick= 'FeasibilityWords()' value='2'></li>
          <li><input type='button' onclick= 'AddFinWords()' value='3'></li>
          <li><input type='button' onclick= 'EducateWords()' value='4'></li>
          <li><input type='button' onclick= 'CapBuildWords()' value='5'></li>
          <li><input type='button' onclick= 'coming()' value='6'></li>
          <li><input type='button' onclick= 'coming()' value='7'></li>
          <li><input type='button' onclick= 'coming()' value='8'></li>
          <li><input type='button' onclick= 'coming()' value='9'></li>
          <li><input type='button' onclick= 'coming()' value='10'></li>
          <li><input type='button' onclick= 'coming()' value='11'></li>
          <li><input type='button' onclick= 'coming()' value='12'></li>
          <li><input type='button' onclick= 'coming()' value='13'></li>
          <li><input type='button' onclick= 'coming()' value='14'></li>
          <li><input type='button' onclick= 'coming()' value='15'></li>
          <li><input type='button' onclick= 'coming()' value='16'> </li>
        </ul>
        <ul id='listwo'>
          <li><input type='button' onclick= 'bangLoc()' value='Bangladesh Locations'></li>
          <li><input type='button' onclick= 'otherLoc()' value='Vietnam Locations'></li>
          <li><input type='button' onclick= 'otherLoc()' value='Laos Locations'></li>

        </ul>
        
    <script type="text/javascript">
    alert ("Upload your text file on the page and then click through the buttons below to search your text for all of the CEPSA key words. These features are all still under testing, so please be patient.")
   
    var reader; //GLOBAL File Reader object for demo purpose only

    /**
     * Check for the various File API support.
     */
    function checkFileAPI() {
        if (window.File && window.FileReader && window.FileList && window.Blob) {
            reader = new FileReader();
            return true; 
        } else {
            alert('The File APIs are not fully supported by your browser. Fallback required.');
            return false;
        }
    }

    /**
     * read text input
     */
    function readText(filePath) {
        var output = ""; //placeholder for text output
        if(filePath.files && filePath.files[0]) {           
            reader.onload = function (e) {
                output = e.target.result;
                displayContents(output);
            };//end onload()
            reader.readAsText(filePath.files[0]);
        }//end if html5 filelist support
        else if(ActiveXObject && filePath) { //fallback to IE 6-8 support via ActiveX
            try {
                reader = new ActiveXObject("Scripting.FileSystemObject");
                var file = reader.OpenTextFile(filePath, 1); //ActiveX File Object
                output = file.ReadAll(); //text contents of file
                file.Close(); //close file "input stream"
                displayContents(output);
            } catch (e) {
                if (e.number == -2146827859) {
                    alert('Unable to access local files due to browser security settings. ' + 
                     'To overcome this, go to Tools->Internet Options->Security->Custom Level. ' + 
                     'Find the setting for "Initialize and script ActiveX controls not marked as safe" and change it to "Enable" or "Prompt"'); 
                }
            }       
        }
        else { //this is where you could fallback to Java Applet, Flash or similar
            return false;
        }       
        return true;
    }   

    /**
     * display content using a basic HTML replacement
     */
    function displayContents(txt) {
        var el = document.getElementById('main'); 
        el.innerHTML = txt; //display output in DOM
    }   

    
    function PilotWords() {
       var text = document.getElementById('main').innerHTML
       var pilotProjectSent = /[A-Z][^\\.;]*(pilot)[^\\.;]*/gi
       var count1 = (text.match(pilotProjectSent) || [])
            for (i=0; i< count1.length; i++) {
                alert ("Instances of pilot: " + count1[i])}
     };
    function FeasibilityWords() {
       var text = document.getElementById('main').innerHTML
       var FeasibleSent = /[A-Z][^\\.;]*(feasib)[^\\.;]*/gi
       var count2 = (text.match(FeasibleSent) || [])
            for (i=0; i< count2.length; i++) {
                alert ("Instances of feasiblility: " + count2[i])}
     };
    
    function AddFinWords() {
       var text = document.getElementById('main').innerHTML
       var AddFinSent = /[A-Z][^\\.;]*(?:financ(e|ing)?\W+(?:\w+\W+){0,10}?additional|additional\W+(?:\w+\W+){0,10}?financ(e|ing)?)[^\\.;]*/gi
       var count3 = (text.match(AddFinSent) || [])
            for (i=0; i< count3.length; i++) {
                alert ("Instances of additional financing: " + count3[i])}
     };

     function EducateWords() {
       var text = document.getElementById('main').innerHTML
       var EducSent = /[A-Z][^\\.;]*(educat)[^\\.;]*/gi
       var count4 = (text.match(EducSent) || [])
            for (i=0; i< count4.length; i++) {
                alert ("Instances of education: " + count4[i])}
     };

     function CapBuildWords() {
       var text = document.getElementById('main').innerHTML
       var CapBuildSent = /[A-Z][^\\.;]*(?:capacity?\W+(?:\w+\W+){0,10}?buil|buil\W+(?:\w+\W+){0,10}?capacity?)[^\\.;]*/gi
       var count5 = (text.match(CapBuildSent) || [])
            for (i=0; i< count5.length; i++) {
                alert ("Instances of capacity building: " + count5[i])}
     };

     };
     /*function TechWords() {
       alert ("this is as far as I have gotten with the sentence search function for documents. Also the technology keyword returns a ridiculous amount of sentences. We may need to rethink this one as well as the one for education and training")
     };*/

        function windowFind(){
        var pilotWords = ["pilot","project"];
        for (var i = 0; i < pilotWords.length; i++) {
            ("Find ->  are = " + window.find(pilotWords[i]))}
      }

    function CountWordsPlan() {
        //alert("We will start by highlighting all the required search terms then we will being our search by looking for the instances of the word 'program'")
        var text = document.getElementById('main').innerHTML;
            var count = (text.match(/plan/gi) || []).length;
                alert ("the word plan occured " + count + " times.")
     };
    function windowFindPlan() { 
        ("Find ->  are = " + window.find("plan"))
        ("Find ->  are = " + window.find("feasib"))}

    function changeText(){
            var pilotProject = (/piloted|pilot|piloting|project/gi)
            var count = (text.match(pilotProject) || []).length;
                alert ("The word pilot occured " + count + " times. And they are highlighted below ")
            var feasible = (/feasible|feasibility|planning/gi)
            var count = (text.match(feasible) || []).length;
                alert ("The word feasible occured " + count + " times.")
                    
            var count = (text.match(/adapt/g) || []).length;
                alert ("The word adapt occured " + count + " times.")
            }

    function bangLoc(){
            alert ("I only search for 150 cities and am slow but I'll do the job. Wait at least a minute before refreshing the screen")
            var text = document.getElementById('main').innerHTML
            var BangCity = (/[A-Z][^\\.;]*(Dhaka)[^\\.;]*|[A-Z][^\\.;]*(Chattagam)[^\\.;]*|[A-Z][^\\.;]*(Dhaka)[^\\.;]*|[A-Z][^\\.;]*(Chattagam)[^\\.;]*|[A-Z][^\\.;]*(Khulna)[^\\.;]*|[A-Z][^\\.;]*(Rajshahi)[^\\.;]*|[A-Z][^\\.;]*(Maimansingh)[^\\.;]*|[A-Z][^\\.;]*(Tungi)[^\\.;]*|[A-Z][^\\.;]*(Komilla)[^\\.;]*|[A-Z][^\\.;]*(Silhat)[^\\.;]*|[A-Z][^\\.;]*(Rangpur)[^\\.;]*|[A-Z][^\\.;]*(Barisal)[^\\.;]*|[A-Z][^\\.;]*(Narsingdi)[^\\.;]*|[A-Z][^\\.;]*(Narayanganj)[^\\.;]*|[A-Z][^\\.;]*(Bogora)[^\\.;]*|[A-Z][^\\.;]*(Jessor)[^\\.;]*|[A-Z][^\\.;]*(Brahman bariya)[^\\.;]*|[A-Z][^\\.;]*(Dinajpur)[^\\.;]*|[A-Z][^\\.;]*(Pabna)[^\\.;]*|[A-Z][^\\.;]*(Nawabganj)[^\\.;]*|[A-Z][^\\.;]*(Tangayal)[^\\.;]*|[A-Z][^\\.;]*(Jamalpur)[^\\.;]*|[A-Z][^\\.;]*(Naugaon)[^\\.;]*|[A-Z][^\\.;]*(Sirajganj)[^\\.;]*|[A-Z][^\\.;]*(Gazipur)[^\\.;]*|[A-Z][^\\.;]*(Chandpur)[^\\.;]*|[A-Z][^\\.;]*(Begamganj)[^\\.;]*|[A-Z][^\\.;]*(Kushtiya)[^\\.;]*|[A-Z][^\\.;]*(Chuadanga)[^\\.;]*|[A-Z][^\\.;]*(Koks bazar)[^\\.;]*|[A-Z][^\\.;]*(Noakhali)[^\\.;]*|[A-Z][^\\.;]*(Satkhira)[^\\.;]*|[A-Z][^\\.;]*(Gaybanda)[^\\.;]*|[A-Z][^\\.;]*(Munshiganj)[^\\.;]*|[A-Z][^\\.;]*(Faridpur)[^\\.;]*|[A-Z][^\\.;]*(Ishurdi)[^\\.;]*|[A-Z][^\\.;]*(Bhairab bazar)[^\\.;]*|[A-Z][^\\.;]*(Kaunia)[^\\.;]*|[A-Z][^\\.;]*(Nator)[^\\.;]*|[A-Z][^\\.;]*(Shahjadpur)[^\\.;]*|[A-Z][^\\.;]*(Sherpur)[^\\.;]*|[A-Z][^\\.;]*(Bhola)[^\\.;]*|[A-Z][^\\.;]*(Jhanaydah)[^\\.;]*|[A-Z][^\\.;]*(Kishorganj)[^\\.;]*|[A-Z][^\\.;]*(Kurigram)[^\\.;]*|[A-Z][^\\.;]*(Rupganj)[^\\.;]*|[A-Z][^\\.;]*(Ramgati)[^\\.;]*|[A-Z][^\\.;]*(Boalkhali)[^\\.;]*|[A-Z][^\\.;]*(Habiganj)[^\\.;]*|[A-Z][^\\.;]*(Alamdanga)[^\\.;]*|[A-Z][^\\.;]*(Sarishabari)[^\\.;]*|[A-Z][^\\.;]*(Mungla)[^\\.;]*|[A-Z][^\\.;]*(Laksham)[^\\.;]*|[A-Z][^\\.;]*(Feni)[^\\.;]*|[A-Z][^\\.;]*(Madaripur)[^\\.;]*|[A-Z][^\\.;]*(Manikganj)[^\\.;]*|[A-Z][^\\.;]*(Fulbaria)[^\\.;]*|[A-Z][^\\.;]*(Patuakhali)[^\\.;]*|[A-Z][^\\.;]*(Gopalpur)[^\\.;]*|[A-Z][^\\.;]*(Kaptai)[^\\.;]*|[A-Z][^\\.;]*(Netrakona)[^\\.;]*|[A-Z][^\\.;]*(Lalmanir hat)[^\\.;]*|[A-Z][^\\.;]*(Jaipur hat)[^\\.;]*|[A-Z][^\\.;]*(Raypur)[^\\.;]*|[A-Z][^\\.;]*(Thakurgaon)[^\\.;]*|[A-Z][^\\.;]*(Bagar hat)[^\\.;]*|[A-Z][^\\.;]*(Sunamganj)[^\\.;]*|[A-Z][^\\.;]*(Damurhuda)[^\\.;]*|[A-Z][^\\.;]*(Rajbari)[^\\.;]*|[A-Z][^\\.;]*(Lakshmipur)[^\\.;]*|[A-Z][^\\.;]*(Rangamati)[^\\.;]*|[A-Z][^\\.;]*(Sarail)[^\\.;]*|[A-Z][^\\.;]*(Magura)[^\\.;]*|[A-Z][^\\.;]*(Sandip)[^\\.;]*|[A-Z][^\\.;]*(Satkaniya)[^\\.;]*|[A-Z][^\\.;]*(Patiya)[^\\.;]*|[A-Z][^\\.;]*(Ramganj)[^\\.;]*|[A-Z][^\\.;]*(Pirojpur)[^\\.;]*|[A-Z][^\\.;]*(Palang)[^\\.;]*|[A-Z][^\\.;]*(Gurudaspur)[^\\.;]*|[A-Z][^\\.;]*(Chilmari)[^\\.;]*|[A-Z][^\\.;]*(Nageshwari)[^\\.;]*|[A-Z][^\\.;]*(Naral)[^\\.;]*|[A-Z][^\\.;]*(Nesarabad)[^\\.;]*|[A-Z][^\\.;]*(Jhalakati)[^\\.;]*|[A-Z][^\\.;]*(Maulvi\sbazar)[^\\.;]*|[A-Z][^\\.;]*(Tungi para)[^\\.;]*|[A-Z][^\\.;]*(Bera)[^\\.;]*|[A-Z][^\\.;]*(Hajiganj)[^\\.;]*|[A-Z][^\\.;]*(Adamighi)[^\\.;]*|[A-Z][^\\.;]*(Char fasson)[^\\.;]*|[A-Z][^\\.;]*(Parbatipur)[^\\.;]*|[A-Z][^\\.;]*(Gomastapur)[^\\.;]*|[A-Z][^\\.;]*(Panchagarh)[^\\.;]*|[A-Z][^\\.;]*(Fatikchhari)[^\\.;]*|[A-Z][^\\.;]*(Kaliganj)[^\\.;]*|[A-Z][^\\.;]*(Ramu)[^\\.;]*|[A-Z][^\\.;]*(Burhanuddin)[^\\.;]*|[A-Z][^\\.;]*(Sherpur)[^\\.;]*|[A-Z][^\\.;]*(Shibganj)[^\\.;]*|[A-Z][^\\.;]*(Roypura)[^\\.;]*|[A-Z][^\\.;]*(Trishal)[^\\.;]*|[A-Z][^\\.;]*(Abhaynagar)[^\\.;]*|[A-Z][^\\.;]*(Gaurnadi)[^\\.;]*|[A-Z][^\\.;]*(Meherpur)[^\\.;]*|[A-Z][^\\.;]*(Bhanga)[^\\.;]*|[A-Z][^\\.;]*(Dohar)[^\\.;]*|[A-Z][^\\.;]*(Jhikargachha)[^\\.;]*|[A-Z][^\\.;]*(Lalmohan)[^\\.;]*|[A-Z][^\\.;]*(Gopalganj)[^\\.;]*|[A-Z][^\\.;]*(Mehendiganj)[^\\.;]*|[A-Z][^\\.;]*(Sri mangal)[^\\.;]*|[A-Z][^\\.;]*(Nilphamari)[^\\.;]*|[A-Z][^\\.;]*(Nalchiti)[^\\.;]*|[A-Z][^\\.;]*(Teknaf)[^\\.;]*|[A-Z][^\\.;]*(Kalia)[^\\.;]*|[A-Z][^\\.;]*(Phultala)[^\\.;]*|[A-Z][^\\.;]*(Nalitabari)[^\\.;]*|[A-Z][^\\.;]*(Pangsha)[^\\.;]*|[A-Z][^\\.;]*(Gafargaon)[^\\.;]*|[A-Z][^\\.;]*(Khagrachari)[^\\.;]*|[A-Z][^\\.;]*(Shailkupa)[^\\.;]*|[A-Z][^\\.;]*(Rangunia)[^\\.;]*|[A-Z][^\\.;]*(Mirzapur)[^\\.;]*|[A-Z][^\\.;]*(Sakhipur)[^\\.;]*|[A-Z][^\\.;]*(Bheramara)[^\\.;]*|[A-Z][^\\.;]*(Sarankhola)[^\\.;]*|[A-Z][^\\.;]*(Bandarban)[^\\.;]*|[A-Z][^\\.;]*(Fulbari)[^\\.;]*|[A-Z][^\\.;]*(Kotchandpur)[^\\.;]*|[A-Z][^\\.;]*(Barguna)[^\\.;]*|[A-Z][^\\.;]*(Senbagh)[^\\.;]*|[A-Z][^\\.;]*(Dhamrai)[^\\.;]*|[A-Z][^\\.;]*(Fakirhat)[^\\.;]*|[A-Z][^\\.;]*(Chhagalnaiya)[^\\.;]*|[A-Z][^\\.;]*(Bajitpur)[^\\.;]*|[A-Z][^\\.;]*(Badarganj)[^\\.;]*|[A-Z][^\\.;]*(Baniachang)[^\\.;]*|[A-Z][^\\.;]*(Ulipur)[^\\.;]*|[A-Z][^\\.;]*(Chhatak)[^\\.;]*|[A-Z][^\\.;]*(Char bhadrasan)[^\\.;]*|[A-Z][^\\.;]*(Pirganj)[^\\.;]*|[A-Z][^\\.;]*(Bhaluka)[^\\.;]*|[A-Z][^\\.;]*(Morrelganj)[^\\.;]*|[A-Z][^\\.;]*(Nabinagar)[^\\.;]*|[A-Z][^\\.;]*(Bhandaria)[^\\.;]*|[A-Z][^\\.;]*(Ramgarh)[^\\.;]*|[A-Z][^\\.;]*(Keshabpur)[^\\.;]*|[A-Z][^\\.;]*(Mathbaria)[^\\.;]*|[A-Z][^\\.;]*(Bochanganj)[^\\.;]*|[A-Z][^\\.;]*(Lohagara)[^\\.;]*|[A-Z][^\\.;]*(Itna)[^\\.;]*|[A-Z][^\\.;]*(Kutubdia)[^\\.;]*|[A-Z][^\\.;]*(Ishwarganj)[^\\.;]*|[A-Z][^\\.;]*(Raozan)[^\\.;]*|[A-Z][^\\.;]*(Domar)[^\\.;]*|[A-Z][^\\.;]*(Muktagachha)[^\\.;]*|[A-Z][^\\.;]*(Manikchhari)[^\\.;]*|[A-Z][^\\.;]*(Bhangura)[^\\.;]/gi)   
       
       var countCity = (text.match(BangCity) || [])
            for (i=0; i< countCity.length; i++) {
                alert (countCity[i])}
     };
     function otherLoc (){
        alert("Bangladesh search features are being tested and Vietnam and laos will be tested afterwards")
     };
     function coming (){
        alert("The buttons only work until #5. The other ones are coming once I get the kinks worked out")
     };
</script>
</head>
<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
<body onload="checkFileAPI();">
    <div id="container">    
        <input type="file" onchange='readText(this)' />
        <br/>
        <hr/>   
        <h3>Here is your file to code:</h3>
        <div id="main">
            ...
        </div>
    </div>
</body>      
<h3> <a href = "http://pdftotext.com/"target="_blank"> Follow this link to convert your PDF file to text </a></h3>
<h3> <a href = "https://www.strausscenter.org/cepsa/about.html"target="_blank"> Click here for more information on our methodology </a></h3>
<h3> <a href = "https://drive.google.com/folderview?id=0B_KklJeZo8MMNS1OR2QxY3N1TGc&usp=sharing"target="_blank"> Download sample project documents to test through this link</a></h3>
</html>
